export const RUN_REASON = {
  VERIFIER_TRANSPORT_ERROR: "VERIFIER_TRANSPORT_ERROR",
  TASK_FAIL_EARLY: "TASK_FAIL_EARLY",
  DUPLICATE_WINDOW: "DUPLICATE_WINDOW",
  STALE_LOCK_REMOVED: "STALE_LOCK_REMOVED",
  RUN_LOCK_HELD: "RUN_LOCK_HELD",
  HEARTBEAT_FAILED: "HEARTBEAT_FAILED",
  STALE_DOING_RECOVERED: "STALE_DOING_RECOVERED",
  PRD_INCOMPLETE: "PRD_INCOMPLETE",
  NO_TASKS: "NO_TASKS",
  NO_QUALITY_GATES: "NO_QUALITY_GATES",
  INVALID_TASK_STATE: "INVALID_TASK_STATE",
  PREREQ_TASK_PENDING: "PREREQ_TASK_PENDING",
  UI_PREREQ_MISSING: "UI_PREREQ_MISSING",
  UI_VERIFY_FAILED: "UI_VERIFY_FAILED",
  VERIFIER_TRANSPORT_EOF: "VERIFIER_TRANSPORT_EOF",
  VERIFIER_FAILED: "VERIFIER_FAILED",
  BUILD_TIMEOUT: "BUILD_TIMEOUT",
  BOOTSTRAP_INSTALL_FAILED: "BOOTSTRAP_INSTALL_FAILED",
  SCAFFOLD_COMMAND_FAILED: "SCAFFOLD_COMMAND_FAILED",
  RUN_FATAL_EXCEPTION: "RUN_FATAL_EXCEPTION",
  REPEATED_UI_FINDINGS: "REPEATED_UI_FINDINGS",
  QUALITY_BOOTSTRAP_INCOMPLETE: "QUALITY_BOOTSTRAP_INCOMPLETE",
  COMMAND_NOT_FOUND: "COMMAND_NOT_FOUND",
  SEMANTIC_REPAIR_GATE_REGRESSION: "SEMANTIC_REPAIR_GATE_REGRESSION",
  SEMANTIC_REPAIR_UI_REGRESSION: "SEMANTIC_REPAIR_UI_REGRESSION",
  WORK_SESSION_NO_PROGRESS: "WORK_SESSION_NO_PROGRESS",
  WORK_SESSION_STATUS_UNKNOWN: "WORK_SESSION_STATUS_UNKNOWN",
  WORK_PROMPT_DISPATCH_TIMEOUT: "WORK_PROMPT_DISPATCH_TIMEOUT",
  WORK_PROMPT_TRANSPORT_ERROR: "WORK_PROMPT_TRANSPORT_ERROR",
  WORK_SESSION_RESET_TIMEOUT: "WORK_SESSION_RESET_TIMEOUT",
  ACCEPTANCE_ARTIFACTS_MISSING: "ACCEPTANCE_ARTIFACTS_MISSING",
  TASK_GRAPH_DEP_MISSING: "TASK_GRAPH_DEP_MISSING",
  TASK_GRAPH_CYCLE: "TASK_GRAPH_CYCLE",
} as const;

export type RunReasonCode = (typeof RUN_REASON)[keyof typeof RUN_REASON];

export const RUN_EVENT = {
  PRECHECK_START: "run.preflight.start",
  PRECHECK_DUPLICATE_WINDOW: "run.duplicate-window",
  LOCK_STALE_PID: "run.lock.stale-pid",
  LOCK_ACQUIRE_FAILED: "run.lock.acquire-failed",
  BLOCKED_HEARTBEAT: "run.blocked.heartbeat",
  STATE_STALE_DOING_RECOVERED: "run.state.stale-doing-recovered",
  BLOCKED_PRD_INCOMPLETE: "run.blocked.prd-incomplete",
  BLOCKED_NO_TASKS: "run.blocked.no-tasks",
  BLOCKED_NO_QUALITY_GATES: "run.blocked.no-quality-gates",
  BLOCKED_INVALID_TASK_STATE: "run.blocked.invalid-task-state",
  BLOCKED_TASK_GRAPH: "run.blocked.task-graph",
  BLOCKED_FAIL_EARLY: "run.blocked.fail-early",
  BLOCKED_UI_PREREQ: "run.blocked.ui-prereq",
  BLOCKED_UI_RECONCILE: "run.blocked.ui-reconcile",
  STARTED: "run.started",
  FINISHED: "run.finished",
  BLOCKED_PREREQ: "run.blocked.prerequisite",
  RECONCILE_SKIPPED: "run.reconcile.skipped",
  RECONCILE_PASS: "run.reconcile.pass",
  RECONCILE_VERIFIER_FAIL: "run.reconcile.verifier-fail",
  VERIFY_START: "run.verify.start",
  VERIFY_PROMPT_SENT: "run.verify.prompt.sent",
  VERIFY_RESPONSE_RECEIVED: "run.verify.response.received",
  VERIFY_TRANSPORT_ERROR: "run.verify.transport.error",
  BLOCKED_VERIFY_TRANSPORT: "run.blocked.verifier-transport",
  UI_CAPABILITIES: "run.ui.capabilities",
  FEEDBACK_APPLIED: "run.remediation.feedback_applied",
  REPAIR_SEMANTIC_START: "run.repair.semantic.start",
  BLOCKED_BUILD_TIMEOUT: "run.blocked.build-timeout",
  GATE_PASS: "run.gate.pass",
  GATE_FAIL: "run.gate.fail",
  BOOTSTRAP_INSTALL_FAILED: "run.bootstrap.install.failed",
  SCAFFOLD_DEFAULT_FAILED: "run.scaffold.default.failed",
  REPAIR_NO_PROGRESS: "run.repair.no-progress",
  BLOCKED_WORK_STATUS_UNKNOWN: "run.blocked.work-status-unknown",
  BLOCKED_WORK_PROMPT_TIMEOUT: "run.blocked.work-prompt-timeout",
  BLOCKED_WORK_PROMPT_TRANSPORT: "run.blocked.work-prompt-transport",
  BLOCKED_WORK_SESSION_RESET_TIMEOUT: "run.blocked.work-session-reset-timeout",
  BLOCKED_ACCEPTANCE_ARTIFACTS: "run.blocked.acceptance-artifacts",
  FATAL_EXCEPTION: "run.fatal.exception",
} as const;

export type RunEventName = (typeof RUN_EVENT)[keyof typeof RUN_EVENT];
